version: 2

models:

  - name: int_orders_grouped_by_month
    description: "Intermediate model summarizing orders grouped by product and month, including metrics such as revenue and expenses."
    
    columns:
     
      - name: product_id
        data_type: varchar
        description: "Unique identifier for each product."
     
      - name: year
        data_type: number
        description: "Year of the transaction."
     
      - name: month
        data_type: number
        description: "Month of the transaction (1-12)."
     
      - name: product_name
        data_type: varchar
        description: "Name of the product."
     
      - name: monthly_quantity_sold
        data_type: number
        description: "Total quantity of the product sold in the specified month."
     
      - name: monthly_incomes
        data_type: number
        description: "Total income generated by the product in the specified month, calculated as quantity sold multiplied by the price."
     
      - name: monthly_expenses
        data_type: number
        description: "Total expenses for the product in the specified month, calculated as quantity sold multiplied by the unit cost."
     
      - name: monthly_total_discounts
        data_type: number
        description: "Total discounts applied to the product in the specified month."




  - name: int_orders_joint_order_items
    description: "Intermediate model joining orders and order items, including detailed product and order-related metrics."
   
    columns:
     
      - name: order_item_id
        data_type: varchar
        description: "Unique identifier for each order item."
     
      - name: order_id
        data_type: varchar
        description: "Unique identifier for each order."
     
      - name: user_id
        data_type: varchar
        description: "Identifier of the user who placed the order."
    
      - name: address_id
        data_type: varchar
        description: "Identifier of the address where the order is delivered."
     
      - name: product_id
        data_type: varchar
        description: "Unique identifier for each product."
     
      - name: product_quantity_sold
        data_type: number
        description: "Quantity of the product sold in the order."
     
      - name: product_price_usd
        data_type: number
        description: "Price of the product in USD."
     
      - name: unit_cost
        data_type: number
        description: "Cost of a single unit of the product in USD."
     
      - name: promo_id
        data_type: varchar
        description: "Identifier for the promotion applied to the order, if any."
    
      - name: discount_in_usd
        data_type: number
        description: "Discount amount applied to the product in USD."
     
      - name: order_created_at_utc
        data_type: timestamp_tz
        description: "Timestamp indicating when the order was created."
     
      - name: delivered_at_utc
        data_type: timestamp_tz
        description: "Timestamp indicating when the order was delivered."
    
      - name: date_load_utc
        data_type: timestamp_tz
        description: "Timestamp indicating when the data was last loaded into the system."
    
      - name: percentage_of_order_cost
        data_type: number
        description: "Percentage of the total order cost attributed to this product."
    
      - name: discount_per_item_usd
        data_type: number
        description: "Discount amount allocated per item in the order, in USD."
